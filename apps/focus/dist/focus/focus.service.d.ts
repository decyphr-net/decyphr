import { Repository } from 'typeorm';
import { FocusSession } from './focus-session.entity';
import { Goal } from './goal.entity';
import { GoalEntry } from './goal-entry.entity';
import { AdjustFocusSessionDto, CreateFocusSessionDto, CreateGoalDto, GoalCheckoffDto, UpdateGoalDto } from './focus.dto';
export declare class FocusService {
    private readonly focusRepo;
    private readonly goalRepo;
    private readonly goalEntryRepo;
    constructor(focusRepo: Repository<FocusSession>, goalRepo: Repository<Goal>, goalEntryRepo: Repository<GoalEntry>);
    private toDate;
    private computeActualSeconds;
    private serializeSession;
    createSession(clientId: string, dto: CreateFocusSessionDto): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    getActiveSession(clientId: string): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    } | null>;
    pauseSession(clientId: string, id: string): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    resumeSession(clientId: string, id: string): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    adjustSession(clientId: string, id: string, dto: AdjustFocusSessionDto): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    completeSession(clientId: string, id: string): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    cancelSession(clientId: string, id: string): Promise<{
        actualSeconds: number;
        remainingSeconds: number | null;
        id: string;
        userId: number | null;
        clientId: string;
        mode: import("./focus.types").FocusMode;
        activityType: import("./focus.types").ActivityType;
        goalText: string | null;
        plannedSeconds: number | null;
        status: import("./focus.types").FocusStatus;
        startedAt: Date;
        endedAt: Date | null;
        pausedAt: Date | null;
        pauseAccumulatedSeconds: number;
        metadataJson: Record<string, unknown> | null;
        goalEntries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    getHistory(clientId: string, query: {
        from?: string;
        to?: string;
        activityType?: string;
        mode?: string;
        page?: number;
        pageSize?: number;
    }): Promise<{
        total: number;
        page: number;
        pageSize: number;
        data: {
            actualSeconds: number;
            remainingSeconds: number | null;
            id: string;
            userId: number | null;
            clientId: string;
            mode: import("./focus.types").FocusMode;
            activityType: import("./focus.types").ActivityType;
            goalText: string | null;
            plannedSeconds: number | null;
            status: import("./focus.types").FocusStatus;
            startedAt: Date;
            endedAt: Date | null;
            pausedAt: Date | null;
            pauseAccumulatedSeconds: number;
            metadataJson: Record<string, unknown> | null;
            goalEntries: GoalEntry[];
            createdAt: Date;
            updatedAt: Date;
        }[];
    }>;
    createGoal(clientId: string, dto: CreateGoalDto): Promise<Goal>;
    getGoals(clientId: string, query: Record<string, string | undefined>): Promise<{
        achieved: number;
        target: number;
        remaining: number;
        percent: number;
        isComplete: boolean;
        goalId: string;
    }[]>;
    getGoal(clientId: string, id: string): Promise<{
        progress: {
            achieved: number;
            target: number;
            remaining: number;
            percent: number;
            isComplete: boolean;
        };
        id: string;
        userId: number | null;
        clientId: string;
        title: string;
        description: string | null;
        periodType: import("./focus.types").GoalPeriodType;
        periodStart: Date;
        periodEnd: Date;
        targetType: import("./focus.types").GoalTargetType;
        targetValue: string;
        activityType: import("./focus.types").ActivityType | null;
        status: import("./focus.types").GoalStatus;
        entries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    updateGoal(clientId: string, id: string, dto: UpdateGoalDto): Promise<{
        progress: {
            achieved: number;
            target: number;
            remaining: number;
            percent: number;
            isComplete: boolean;
        };
        id: string;
        userId: number | null;
        clientId: string;
        title: string;
        description: string | null;
        periodType: import("./focus.types").GoalPeriodType;
        periodStart: Date;
        periodEnd: Date;
        targetType: import("./focus.types").GoalTargetType;
        targetValue: string;
        activityType: import("./focus.types").ActivityType | null;
        status: import("./focus.types").GoalStatus;
        entries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    archiveGoal(clientId: string, id: string): Promise<{
        progress: {
            achieved: number;
            target: number;
            remaining: number;
            percent: number;
            isComplete: boolean;
        };
        id: string;
        userId: number | null;
        clientId: string;
        title: string;
        description: string | null;
        periodType: import("./focus.types").GoalPeriodType;
        periodStart: Date;
        periodEnd: Date;
        targetType: import("./focus.types").GoalTargetType;
        targetValue: string;
        activityType: import("./focus.types").ActivityType | null;
        status: import("./focus.types").GoalStatus;
        entries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    checkoffGoal(clientId: string, id: string, dto: GoalCheckoffDto): Promise<{
        progress: {
            achieved: number;
            target: number;
            remaining: number;
            percent: number;
            isComplete: boolean;
        };
        id: string;
        userId: number | null;
        clientId: string;
        title: string;
        description: string | null;
        periodType: import("./focus.types").GoalPeriodType;
        periodStart: Date;
        periodEnd: Date;
        targetType: import("./focus.types").GoalTargetType;
        targetValue: string;
        activityType: import("./focus.types").ActivityType | null;
        status: import("./focus.types").GoalStatus;
        entries: GoalEntry[];
        createdAt: Date;
        updatedAt: Date;
    }>;
    getGoalProgress(clientId: string, id: string): Promise<{
        achieved: number;
        target: number;
        remaining: number;
        percent: number;
        isComplete: boolean;
        goalId: string;
    }>;
    getProgressSummary(clientId: string, query: Record<string, string | undefined>): Promise<{
        weeklyMinutes: number;
        monthlyMinutes: number;
        yearlyMinutes: number;
        customMinutes: number | null;
        goals: {
            total: number;
            active: number;
            completed: number;
        };
    }>;
    private getOwnedSession;
    private getOwnedGoal;
    private computeGoalProgress;
    private refreshGoalStatus;
    private createDerivedGoalEntries;
}
